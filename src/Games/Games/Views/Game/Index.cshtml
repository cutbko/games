<div id="gameArea">
    <canvas id="gameCanvas" width="0" height="0" style="background-color: gray"></canvas>
</div>

@section scripts
{
    <script src="~/Scripts/require.js" data-main="/Scripts/Modules/pingPongFactory.js"></script>

    <script>
        $(document).ready(function() {
            require(['pingPongFactory'], function(pingPongFactory) {
                window.pingPongGame = pingPongFactory.create("gameCanvas");

                resizeGame();
                window.addEventListener('resize', resizeGame, false);
                window.addEventListener('orientationchange', resizeGame, false);
            });
        });

        function resizeGame() {
            var header = document.querySelector('header');
            var gameArea = document.getElementById('gameArea');
            var widthToHeight = 16 / 9;
            var newWidth = window.innerWidth;
            var newHeight = window.innerHeight - header.offsetHeight;
            var newWidthToHeight = newWidth / newHeight;

            if (newWidthToHeight > widthToHeight) {
                newWidth = newHeight * widthToHeight;
                gameArea.style.height = newHeight + 'px';
                gameArea.style.width = newWidth + 'px';
                gameArea.style.left = (window.innerWidth - newWidth) / 2 + "px";
            } else {
                newHeight = newWidth / widthToHeight;
                gameArea.style.width = newWidth + 'px';
                gameArea.style.height = newHeight + 'px';
                gameArea.style.left = "0px";
            }

            gameArea.style.top = header.offsetHeight + 'px';
            
            var gameCanvas = document.getElementById('gameCanvas');
            gameCanvas.width = newWidth;
            gameCanvas.height = newHeight;
        }
    </script>
}
